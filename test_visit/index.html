<div id="about-resort-img">
    <div class="container">
        <h1 class="sub-title">Resort</h1>
        <div class="service-list">
            <div class="service" data-service-id="456">
                <img src="/HoChiMinh/villa.jpg" alt="Villa SÃ´ng">
                <div class="layer">
                    <h3>Villa SÃ´ng</h3>
                    <a href="https://villasong.com/"><i class="fa-solid fa-up-right-from-square"></i></a>
                    <div class="popular__rating">
                        <span><i class="ri-star-fill"></i></span>
                        3.0(2200) ðŸ˜Š
                    </div>

                    <!-- Add Mark as Visited button here -->
                    <button class="mark-visited-btn">Mark as Visited</button>

                    <!-- Display visit time once the button is clicked -->
                    <div id="visitInfo" style="display: none; margin-top: 10px;">
                        <p><strong>Service Visited At:</strong> <span id="visitDateTime"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    // Function to handle marking a service as visited
    document.querySelector('.mark-visited-btn').addEventListener('click', function() {
        const serviceId = document.querySelector('.service').getAttribute('data-service-id');  // Get the service ID from the data attribute

        // Get the current date and time
        const currentDateTime = new Date().toLocaleString();

        // Show the current date and time on the page
        document.getElementById('visitDateTime').textContent = currentDateTime;
        document.getElementById('visitInfo').style.display = 'block';

        // Call the API to add the visit to the service
        axios.post(`/api/services/${serviceId}/visit`)
            .then(response => {
                alert("Service marked as visited successfully!");
                console.log(response.data); // Handle the response if needed
            })
            .catch(error => {
                console.error("There was an error marking the service as visited:", error);
                alert("Failed to mark service as visited.");
            });
    });
</script>
